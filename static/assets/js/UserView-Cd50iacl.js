import{u as J}from"./userstore-DjPcRT5O.js";import{d as N,q as p,e as v,o as d,k as x,w as t,r as a,a as o,c as j,l as E,v as G,b as r,i as M,h as _,g as Z,p as q,j as O,_ as T}from"./index-CNCEsL4D.js";const m=n=>(q("data-v-677d92ae"),n=n(),O(),n),$=m(()=>r("h5",null,"修改个人资料",-1)),D=m(()=>r("span",{style:{"margin-right":"8px"}},"性别：",-1)),H=["src"],K=m(()=>r("div",{class:"grid-content ep-bg-purple-light"},null,-1)),L="top",Q=N({__name:"UserView",setup(n){const f=J(),c=p(""),b=p({token:sessionStorage.getItem("token")}),A=p("/AAA/api/file/upload"),V=(e,l)=>{console.log(e),console.log(l),c.value=e.thUrl,f.methods.reset_imgSrc(e.thUrl)},U=e=>{if(e.type==="image/jpeg"||e.type==="image/jpg"){if(e.size/1024/1024>2)return _.error("图片大小超过2M"),!1}else return _.error("图片格式不正确，仅支持 JPG、JPEG 和 PNG 格式的图片"),!1;return!0},s=v({sex:"男",emil:""}),k=v({emil:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{pattern:/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,message:"邮箱格式不正确",trigger:["blur","change"]}]}),y=()=>{console.log("提交!"),Z.post(f.apiurl+"/AAA/api/user/updateusermsg",s).then(function(e){console.log(e),e.data.code==200&&_({type:"success",message:"修改成功"})}).catch(function(e){console.log(e)})};return(e,l)=>{const g=a("el-radio"),w=a("el-radio-group"),u=a("el-form-item"),S=a("el-icon"),z=a("el-upload"),I=a("el-input"),P=a("el-form"),B=a("el-button"),h=a("el-col"),C=a("el-row");return d(),x(C,null,{default:t(()=>[o(h,{span:12},{default:t(()=>[$,o(P,{"label-position":L,"label-width":"auto",model:s,size:"large",rules:k,style:{"max-width":"600px"}},{default:t(()=>[o(u,null,{default:t(()=>[D,o(w,{modelValue:s.sex,"onUpdate:modelValue":l[0]||(l[0]=i=>s.sex=i)},{default:t(()=>[o(g,{label:"男",value:"男"}),o(g,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),o(u,{prop:"tu"},{default:t(()=>[o(z,{class:"avatar-uploader",action:A.value,"show-file-list":!1,headers:b.value,limit:1,"on-success":V,"before-upload":U},{default:t(()=>[c.value?(d(),j("img",{key:0,src:c.value,class:"avatar"},null,8,H)):(d(),x(S,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[o(E(G))]),_:1}))]),_:1},8,["action","headers"])]),_:1}),o(u,{prop:"emil"},{default:t(()=>[o(I,{"prefix-icon":"Monitor",modelValue:s.emil,"onUpdate:modelValue":l[1]||(l[1]=i=>s.emil=i),placeholder:"请输入邮箱！"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),r("div",null,[o(B,{onClick:y,type:"primary"},{default:t(()=>[M("提交")]),_:1})])]),_:1}),o(h,{span:12},{default:t(()=>[K]),_:1})]),_:1})}}}),X=T(Q,[["__scopeId","data-v-677d92ae"]]);export{X as default};
