import{d as V,e as c,o as v,c as y,a as t,w as a,b as d,f as u,g as C,E as S,h as _,r as s,i as g,p as B,j as I,_ as U}from"./index-DG0haVY1.js";import{u as E}from"./userstore--EGtlAxx.js";const A=n=>(B("data-v-3a5db201"),n=n(),I(),n),L={id:"login_1"},N=A(()=>d("div",{id:"login_hander"},[d("h1",null,"登录")],-1)),q={style:{height:"40px","line-height":"40px","text-align":"right","margin-bottom":"20px"}},z="top",M=V({__name:"ComLogin",setup(n){const l=E(),o=c({name:"",password:""}),h=c({name:[{required:!0,message:"请输入用户名！",trigger:"blur"},{min:3,max:10,message:"字符长度必须在3-10之间！",trigger:"blur"}],password:[{required:!0,message:"请输入密码！",trigger:"blur"},{min:6,max:18,message:"字符长度必须在6-18之间！",trigger:"blur"}]}),f=()=>{u.push({name:"registered"})},x=()=>{C.post(l.apiurl+"/AAA/api/user/login",{name:o.name,password:o.password}).then(function(e){console.log(e),e.data.code==200?(console.log("登录成功！"),window.sessionStorage.setItem("token",e.data.data.token),l.methods.reset_imgSrc(e.data.data.imgUrl),l.methods.reset_username(e.data.data.name),l.methods.reset_usersex(e.data.data.sex),S.alert("点击确认，进入主页","提示",{confirmButtonText:"确认",callback:()=>{_({type:"success",message:e.data.msg}),u.push({name:"home"})}})):_.error(e.data.msg)}).catch(function(e){console.log(e)})};return(e,r)=>{const m=s("el-input"),p=s("el-form-item"),w=s("el-form"),b=s("el-link"),k=s("el-button");return v(),y("div",L,[N,t(w,{"label-position":z,"label-width":"auto",model:o,size:"large",rules:h,style:{"max-width":"600px"}},{default:a(()=>[t(p,{prop:"name"},{default:a(()=>[t(m,{"prefix-icon":"User",modelValue:o.name,"onUpdate:modelValue":r[0]||(r[0]=i=>o.name=i),placeholder:"请输入用户名！"},null,8,["modelValue"])]),_:1}),t(p,{prop:"password"},{default:a(()=>[t(m,{"prefix-icon":"Lock",modelValue:o.password,"onUpdate:modelValue":r[1]||(r[1]=i=>o.password=i),"show-password":!0,placeholder:"请输入密码！"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),d("div",q,[t(b,{underline:!1,onClick:f,type:"primary"},{default:a(()=>[g("还没有账号，前往注册！")]),_:1})]),d("div",null,[t(k,{style:{width:"100%"},onClick:x,size:"large",type:"primary"},{default:a(()=>[g("登录")]),_:1})])])}}}),D=U(M,[["__scopeId","data-v-3a5db201"]]);export{D as default};
